<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorator="account_layout">


    <div class="content" layout:fragment="content">
        <div th:if="${errorMessage}" class="bg-danger">
            <h2 th:text="${errorMessage}"/>
        </div>
        <div th:if="${successMessage}" class="bg-success">
            <h2 th:text="${successMessage}"/>
        </div>
	
		<div>
			<form method="POST" enctype="multipart/form-data" th:action="@{/account/seller}">

				<h3>Create a new deal</h3>

				<div class="form-group">
					<label for="description">Description:</label>
					<input type="text" name="description" id="description" required="required" />
				</div>

				<div class="form-group">
					<label for="buyer_id">Customer/Buyer:</label>
					
				    <select class="form-control" name="buyer_id" id="buyer_id" required="required">
					    <option disabled="disabled" selected="selected" value="">select buyer</option>
					    <option th:each="buyer : ${buyers}" th:value="${buyer.id}" th:text="${buyer.email}"></option>
				    </select>					
				
				</div>
			
				<div class="form-group">
					<label for="fileToUpload">Upload up to 3 files:</label>
					<input type="file" name="file" id="fileToUpload" required="required" />
					<input type="file" name="file2" id="fileToUpload2" />
					<input type="file" name="file3" id="fileToUpload3" />										
				</div>
				
				<button type="submit" class="btn btn-default">Upload</button>
				
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			</form>
		</div>
		
		<hr />
		
		<div class="dealsList" id="sellerDealsList">
			<ul>
				<li th:each="deal : ${deals}">
					<span th:text="${deal.description}"></span>
					 - shared with 
					<span th:text="${deal.buyer.email}"></span>
					 on
					<span th:text="${#dates.format(deal.createdAt, 'dd/MMM/yyyy HH:mm')}"></span>
					
										
					<ul>
						<li th:each="document : ${deal.documents}" >
							<a target="_blank" th:href="@{/account/document/{document_id}.pdf(document_id=${document.id})}" th:text="${document.filename}"></a>
						</li>
					</ul>					
					
				</li>
			</ul>	
			

		</div>
		
    </div>
    
</html>
      

